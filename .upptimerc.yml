owner: KevvTheGoat # Your GitHub organization or username, where this repository lives
repo: ks-status # The name of this repository

sites:
  - name: Kevin Service Main Site
    url: https://www.kevsrv.me
  - name: Kevin Service Registry
    url: https://registry.kevsrv.me
    icon: https://www.kevsrv.me/assets/images/favicon.ico
  - name: Kevin Service Registry Backend
    url: https://registry.kevsrv.me/api/
    icon: https://www.kevsrv.me/assets/images/favicon.ico
    expectedStatusCodes:
      - 404
  - name: Kevin Service Free Hosting
    url: https://free.kevsrv.me
  - name: Kevin Service Free Hosting Backend
    icon: https://www.kevsrv.me/assets/images/favicon.ico
    url: https://free.kevsrv.me/api/

status-website:
  # Add your custom domain name, or remove the `cname` line if you don't have a domain
  # Uncomment the `baseUrl` line if you don't have a custom domain and add your repo name there
  cname: status.kevsrv.me
  # baseUrl: /your-repo-name
  logoUrl: https://www.kevsrv.me/assets/images/logo.png
  name: Status
  introTitle: "Kevin Service Status"
  introMessage: This is a status page for all services under Kevin Service
  navbar:
    - title: Home
      href: https://kevsrv.me
    - title: Status
      href: /

  customBodyHtml: |
    <div id="ks-dns-panel" style="display:none; margin: 1rem 0;">
      <h2 style="margin: 0 0 .5rem 0;">DNS Status</h2>
      <div id="ks-dns-box" style="padding: .75rem; border: 1px solid rgba(0,0,0,.1); border-radius: .75rem;">
        Loadingâ€¦
      </div>
    </div>

  customHeadHtml: |
    <script defer>
      (async () => {
        const URL = "https://raw.githubusercontent.com/kevvTheGoat/ks-status/master/assets/dns-status.json";

        const esc = (s) => (s ?? "").toString()
          .replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");

        function placePanel() {
          const panel = document.getElementById("ks-dns-panel");
          if (!panel) return false;

          // Try to place right under the main H1 title
          const h1 = document.querySelector("main h1, h1");
          if (h1 && h1.parentNode) {
            h1.parentNode.insertAdjacentElement("afterend", panel);
            panel.style.display = "block";
            return true;
          }

          // Fallback: place at top of main content
          const main = document.querySelector("main");
          if (main) {
            main.insertAdjacentElement("afterbegin", panel);
            panel.style.display = "block";
            return true;
          }

          return false;
        }

        // Wait until the page actually renders (Upptime is client-rendered)
        for (let i = 0; i < 50; i++) {
          if (placePanel()) break;
          await new Promise(r => setTimeout(r, 100));
        }

        const box = document.getElementById("ks-dns-box");
        if (!box) return;

        try {
          const res = await fetch(URL, { cache: "no-store" });
          if (!res.ok) throw new Error("HTTP " + res.status);
          const data = await res.json();

          const servers = (data.servers || []).map(s => `
            <div style="margin:.6rem 0;">
              <div><strong>${esc(s.name)}</strong></div>
              <pre style="margin:.35rem 0 0; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; white-space: pre-wrap;">${esc(s.soaAnswer || "")}</pre>
            </div>
          `).join("");

          box.innerHTML =
            `<div><strong>Domain:</strong> ${esc(data.domain)}<br><strong>Last Updated:</strong> ${esc(data.generatedAt)}</div>` +
            `<hr style="border:none;border-top:1px solid rgba(0,0,0,.08);margin:.6rem 0;">` +
            (servers || "<div>No server data</div>");
        } catch (e) {
          box.textContent = "Failed to load DNS status: " + (e && e.message ? e.message : String(e));
        }
      })();
    </script>

# Upptime also supports notifications, assigning issues, and more
# See https://upptime.js.org/docs/configuration
